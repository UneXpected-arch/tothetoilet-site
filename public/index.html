<!doctype html> 
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ðŸš½ To The Toilet â€” WIPE Game</title>
  <link rel="icon" type="image/png" href="/game/assets/favicon.png" />

  <!-- Strict, safe CSP (no unsafe-eval, no external scripts) -->
  <meta http-equiv="Content-Security-Policy"
        content="
          default-src 'self';
          script-src 'self';
          style-src 'self' 'unsafe-inline';
          img-src 'self' data:;
          media-src 'self';
          font-src 'self';
          connect-src 'self';
          frame-src 'none';
          base-uri 'self';
          form-action 'self';
        ">

  <!-- Open Graph -->
  <meta property="og:title" content="ðŸš½ To The Toilet â€” WIPE Game" />
  <meta property="og:description" content="ðŸ’¦ Flush your debt, catch the gains! Can YOU scoop the profits before they get flushed forever?" />
  <meta property="og:image" content="https://www.tothetoilet.xyz/assets/social-card.png" />
  <meta property="og:url" content="https://www.tothetoilet.xyz" />
  <meta property="og:type" content="website" />

  <!-- Twitter Card (just metadata; no scripts needed) -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@WIPE_it_UP" />
  <meta name="twitter:title" content="ðŸš½ To The Toilet â€” WIPE Game" />
  <meta name="twitter:description" content="ðŸ’¦ Flush your debt, catch the gains! Can YOU scoop the profits before they get flushed forever?" />
  <meta name="twitter:image" content="https://www.tothetoilet.xyz/assets/social-card.png" />

  <style>
    :root{ --navy:#0E2341; --gold:#F6C445; --blue:#1E4E89; --text:#F7F7F7; }
    *{ box-sizing:border-box; margin:0; padding:0; }
    html,body{ height:100%; overflow-x:hidden; }

    /* Background video */
    .video-bg{
      position:fixed; top:50%; left:50%;
      min-width:100%; min-height:100%;
      transform:translate(-50%,-50%) scale(1.05);
      object-fit:cover; z-index:-3; will-change:transform;
    }
    /* Readability overlay + image fallback */
    .overlay{ position:fixed; inset:0; background:rgba(14,35,65,.65); z-index:-2; pointer-events:none; }
    .no-video .overlay{
      background:
        linear-gradient(rgba(14,35,65,.65), rgba(14,35,65,.65)),
        url("/assets/social-card.png") center/cover no-repeat;
    }

    /* Floating layer */
    #float-layer{ position:fixed; inset:0; pointer-events:none; z-index:-1; overflow:hidden; }
    .float-item{
      position:absolute; width:80px; height:auto;
      filter: drop-shadow(0 0 14px rgba(255,255,200,.9));
      will-change: transform, opacity;
    }
    .sparkle{
      position:absolute; width:6px; height:6px; border-radius:50%;
      background:radial-gradient(circle,#fff 0%, #ffe07a 40%, transparent 70%);
      pointer-events:none; opacity:.85; filter:blur(.2px);
      animation: sparkleFade .8s linear forwards;
    }
    @keyframes sparkleFade {
      0% { transform: scale(1) translateY(0); opacity: 1; }
      100% { transform: scale(.5) translateY(-8px); opacity: 0; }
    }

    body{
      color:var(--text);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;
      display:flex; flex-direction:column; align-items:center; justify-content:flex-start;
      padding:40px 0 60px;
    }
    .wrap{
      width:min(960px,92%); text-align:center;
      background:rgba(14,35,65,.78); border:1px solid rgba(255,255,255,.12);
      border-radius:18px; padding:32px 22px; backdrop-filter:blur(2px);
      box-shadow:0 10px 40px rgba(0,0,0,.35); margin-bottom:40px;
    }
    h1{ margin:0 0 8px; font-size:clamp(28px,6vw,56px); color:var(--gold); text-shadow:0 0 14px rgba(246,196,69,.9); letter-spacing:.5px; }
    p{ margin:8px auto 18px; max-width:720px; font-size:clamp(16px,2.8vw,20px) }
    .emoji{ display:inline-block; animation:pulse 1.4s infinite ease-in-out }
    @keyframes pulse{ 0%,100%{ transform:scale(1) } 50%{ transform:scale(1.2) } }

    .cta{
      display:inline-block; padding:14px 24px; border-radius:12px;
      background:var(--gold); color:#06233f; font-weight:900; text-decoration:none;
      font-size:clamp(18px,3.5vw,22px);
      box-shadow:0 6px 0 #caa02b, 0 0 20px rgba(246,196,69,.85);
      transition:transform .15s ease, box-shadow .15s ease;
    }
    .cta:hover{ box-shadow:0 8px 24px rgba(246,196,69,1), 0 6px 0 #caa02b }
    .cta:active{ transform:translateY(2px); box-shadow:0 4px 0 #caa02b }
    .sub{ opacity:.85; font-size:14px; margin-top:10px }
    .x-btn{
      display:inline-block; margin-top:10px; background:#000;
      color:#fff; padding:8px 14px; border-radius:8px; font-weight:700; text-decoration:none;
    }

    /* Mobile tweaks */
    @media (max-width:768px){
      .float-item{ width:40px; }
      .wrap{ padding:26px 18px; }
      body{ padding:28px 0 42px; }
    }
    /* Reduced motion */
    @media (prefers-reduced-motion:reduce){
      .emoji{ animation:none !important }
    }
  </style>
</head>
<body>
  <!-- Background video -->
  <video id="bg-video" class="video-bg" autoplay muted loop playsinline poster="/assets/social-card.png">
    <source src="/assets/bg.webm" type="video/webm">
    <source src="/assets/bg.mp4" type="video/mp4">
  </video>
  <div class="overlay"></div>

  <!-- Floating decorative items with sparkle trails -->
  <div id="float-layer"></div>

  <main class="wrap">
    <h1>ðŸš½ TO THE TOILET</h1>
    <p>
      <span class="emoji">ðŸ’¦</span> <span style="color:var(--gold);font-weight:700;">Flush your debt</span>, catch the gains!<br/>
      <span class="emoji">ðŸ§»</span> The only game where <span style="color:var(--gold);font-weight:700;">degeneracy meets destiny</span>.<br/>
      <span class="emoji">ðŸ’°</span> Can YOU scoop the <span style="color:var(--gold);font-weight:700;">profits</span> before they get flushed forever?
    </p>
    <a class="cta" href="/game">â–¶ Play Now</a>
    <div class="sub">
      Powered by the WIPE community â€¢ #WIPEcoin
      <br/>
      <a class="x-btn" href="https://twitter.com/WIPE_it_UP" target="_blank" rel="noopener">Follow on X (Twitter)</a>
    </div>
  </main>

  <!-- (Removed Twitter embed script to keep CSP strict) -->

  <script>
    // Parallax for video + fallbacks (no eval, no string timeouts)
    (function(){
      const video = document.getElementById('bg-video');
      const isMobile = matchMedia('(max-width:768px)').matches;
      let tx=0,ty=0,cx=0,cy=0;
      const max = isMobile ? 8 : 15, ease = 0.05;

      function set(x,y){
        const nx = (x/innerWidth)*2-1, ny = (y/innerHeight)*2-1;
        tx = nx*max; ty = ny*max;
      }
      addEventListener('mousemove', e=>set(e.clientX,e.clientY), {passive:true});
      addEventListener('touchmove', e=>{ if(e.touches[0]) set(e.touches[0].clientX,e.touches[0].clientY) }, {passive:true});

      (function loop(){
        cx += (tx-cx)*ease; cy += (ty-cy)*ease;
        video.style.transform = `translate(-50%,-50%) scale(1.05) translate(${cx.toFixed(2)}px,${cy.toFixed(2)}px)`;
        requestAnimationFrame(loop);
      })();

      // Reduced-motion fallback + video failure fallback
      if (matchMedia('(prefers-reduced-motion: reduce)').matches){ try{ video.pause(); video.removeAttribute('loop'); }catch(e){} }
      function fail(){ document.body.classList.add('no-video'); }
      video.addEventListener('error', fail, {once:true});
      setTimeout(()=>{ if (video.readyState < 2) fail(); }, 2000);
    })();

    // Floaters + sparkle trails (no eval, no external libs)
    (function(){
      const layer = document.getElementById('float-layer');
      const isMobile = matchMedia('(max-width:768px)').matches;
      const MAX_MOBILE = 4;

      function spawnOne(){
        const img = new Image();
        img.className = 'float-item';
        const isCoin = Math.random() < 0.55;
        img.src  = isCoin ? '/assets/coin.png' : '/assets/tp-roll.png';
        img.alt  = isCoin ? 'Coin' : 'Toilet Paper Roll';
        img.style.left = (Math.random() * 92 + 4) + 'vw';
        img.style.top  = '110vh';

        // Size + speed
        const scale = isMobile ? (0.7 + Math.random()*0.5) : (0.8 + Math.random()*0.8);
        img.style.width = (80 * scale) + 'px';
        const speed = (isMobile ? 0.6 : 0.9) + Math.random()*0.6; // px per frame

        layer.appendChild(img);

        let y = window.innerHeight + 120;
        let t = 0;
        (function tick(){
          t += 1;
          y -= speed;
          const sway = Math.sin(t/40) * (isMobile ? 12 : 18);
          img.style.transform = `translate(${sway}px, ${y}px) rotate(${t*0.6}deg)`;
          // Sparkle every few frames
          if (t % (isMobile ? 12 : 8) === 0){
            const sp = document.createElement('div');
            sp.className = 'sparkle';
            const r = img.getBoundingClientRect();
            sp.style.left = (r.left + r.width/2) + 'px';
            sp.style.top  = (r.top  + r.height*0.7) + 'px';
            document.body.appendChild(sp);
            setTimeout(()=>sp.remove(), 850);
          }
          if (y > -140) requestAnimationFrame(tick);
          else img.remove();
        })();
      }

      // Keep a steady stream
      function loopSpawn(){
        const count = layer.querySelectorAll('.float-item').length;
        if (!isMobile && count < 8) spawnOne();
        if (isMobile && count < MAX_MOBILE) spawnOne();
      }
      setInterval(loopSpawn, 900);

      // Hide floaters if assets missing
      Promise.all(['/assets/coin.png','/assets/tp-roll.png'].map(src => new Promise(r=>{
        const i=new Image(); i.onload=()=>r(true); i.onerror=()=>r(false); i.src=src;
      }))).then(([coinOK,tpOK])=>{
        if(!(coinOK && tpOK)) layer.style.display='none';
      });
    })();
  </script>
</body>
</html>
